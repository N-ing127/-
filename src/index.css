@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  /* Leaflet Marker - 玻璃擬態氣泡 */
  .leaflet-marker-bubble {
    @apply bg-white/40 backdrop-blur-md border-2 border-white/70 shadow-lg shadow-black/20 rounded-full;
    @apply w-12 h-12 flex items-center justify-center transition-all duration-300;
    @apply hover:scale-110 active:scale-95 cursor-pointer;
  }

  /* 氣泡下方的小箭頭 */
  .leaflet-marker-pointer {
    @apply w-0 h-0 border-l-[8px] border-r-[8px] border-t-[10px] mx-auto -mt-0.5 transition-colors duration-300;
  }

  /* 氣泡內的文字/圖標 */
  .leaflet-marker-content {
    @apply text-white font-bold text-sm leading-none drop-shadow-sm;
  }

  /* Leaflet 地圖控制項 (縮放按鈕) - 玻璃化覆蓋 */
  .leaflet-control-container .leaflet-control-zoom {
    @apply border-none shadow-none mt-4 ml-4;
  }

  .leaflet-bar a {
    @apply bg-white/70 backdrop-blur-md border-2 border-white/50 shadow-lg shadow-gray-200/50;
    @apply text-stone-600 font-bold flex items-center justify-center text-lg;
    @apply w-10 h-10 transition-all duration-200;
    background-image: none !important;
  }

  .leaflet-bar a:hover { @apply bg-white text-emerald-600 border-white scale-105 z-10; }
  .leaflet-bar a:active { @apply scale-95 shadow-inner bg-stone-100; }
  .leaflet-bar a:first-child { @apply rounded-t-xl rounded-b-none border-b-0; }
  .leaflet-bar a:last-child { @apply rounded-b-xl rounded-t-none; }
  .leaflet-bar a.leaflet-disabled { @apply bg-gray-100/50 text-gray-300 cursor-not-allowed hover:scale-100 border-gray-100/50; }
}
/* --- 重新優化深色模式全局色調 --- */

/* 1. 修正整體背景：不要死黑，改用深灰藍色調更有質感 */
.dark body { 
  background-color: #0f172a !important; /* Slate-900 */
}

/* 2. 修正主頁背景 (原本太白的部分) */
.dark .bg-stone-50 { 
  background-color: #0f172a !important; 
}

/* 3. 修正個人頁與卡片容器 (讓它比背景亮一點點，產生層次) */
.dark .bg-white { 
  background-color: #1e293b !important; /* Slate-800 */
}

/* 4. 修正文字顏色：避免純白刺眼，改用柔和灰白 */
.dark .text-gray-800 { 
  color: #f1f5f9 !important; 
}

.dark .text-gray-700 { 
  color: #e2e8f0 !important; 
}

.dark .text-gray-500 { 
  color: #94a3b8 !important; 
}

/* 5. 修正邊框：改用半透明，讓深色模式更深邃 */
.dark .border-gray-100, 
.dark .border-gray-200, 
.dark .border-white\/50 { 
  border-color: rgba(255, 255, 255, 0.1) !important; 
}

/* 6. 地圖濾鏡：稍微調暗一點，不要太亮 */
.dark .leaflet-tile {
  filter: invert(100%) hue-rotate(180deg) brightness(0.8) contrast(0.9) !important;
}